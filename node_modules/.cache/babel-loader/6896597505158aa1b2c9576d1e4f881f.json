{"ast":null,"code":"import _slicedToArray from\"/Users/nazardosmukhambetov/Desktop/MAIN-PROJECT-GIGAGRAM-main/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from\"react\";import{observer}from\"mobx-react-lite\";import Container from\"@mui/material/Container\";import PostCard from\"./PostCard\";import RecomendUsers from\"./RecomendUsers\";import ErrorModal from\"../../partial/modal/ErrorModal\";import{useStores}from\"../../../stores/MainStore\";// eslint-disable-next-line no-unused-vars\nimport feed from\"./feed.scss\";import Footer from\"../../partial/footer/Footer\";import Aside from\"./Aside\";import{Fade,Toolbar,useScrollTrigger,Fab,Box}from'@mui/material';import{KeyboardArrowUp}from'@mui/icons-material';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function ScrollTop(props){var children=props.children,window=props.window;var trigger=useScrollTrigger({target:window?window():undefined,disableHysteresis:true,threshold:100});var handleClick=function handleClick(event){var anchor=(event.target.ownerDocument||document).querySelector('#back-to-top-anchor');if(anchor){anchor.scrollIntoView({block:'center'});}};return/*#__PURE__*/_jsx(Fade,{in:trigger,children:/*#__PURE__*/_jsx(Box,{onClick:handleClick,role:\"presentation\",sx:{position:'fixed',bottom:16,right:16},children:children})});};var FeedPage=observer(function(){var _useStores=useStores(),RequestsStore=_useStores.RequestsStore,ConfigStore=_useStores.ConfigStore;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),posts=_useState2[0],setPosts=_useState2[1];useEffect(function(){new Promise(function(resolve,rejects){resolve();}).then(function(){return RequestsStore.doGet(ConfigStore.url+\"/posts\");}).then(function(post){//  ConfigStore.setLoading(false);\nif(post===\"Forbidden\"){ConfigStore.setErr(\"Token has been burned\");ConfigStore.setIsShow(true);}else{setPosts(post);}});},[]);useEffect(function(){if(ConfigStore.me.username){RequestsStore.doGet(ConfigStore.url+\"/followings/\"+ConfigStore.me.username).then(function(resp){ConfigStore.setFollowings(resp.following);});}else{return;}},[ConfigStore.me.username]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Toolbar,{id:\"back-to-top-anchor\",style:{position:\"absolute\",top:0,zIndex:\"-1\"}}),/*#__PURE__*/_jsxs(\"div\",{className:\"main__feed\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"feed__header\",children:/*#__PURE__*/_jsx(\"h2\",{children:\"Feed page | Favoriets from students\"})}),/*#__PURE__*/_jsx(\"main\",{className:\"feed\",children:/*#__PURE__*/_jsxs(Container,{maxWidth:\"xl\",style:{background:\"none\",position:\"relative\"},sx:{display:\"flex\",justifyContent:\"center\"},children:[/*#__PURE__*/_jsx(Aside,{}),/*#__PURE__*/_jsx(\"div\",{className:\"feed__posts\",style:{background:\"none\",width:\"100%\"},children:posts===\"Not Found\"?/*#__PURE__*/_jsx(\"h2\",{className:\"errorCase\",children:\"Sorry any posts found\"}):posts.slice().reverse().map(function(item){return/*#__PURE__*/_jsx(PostCard,{item:item},item._id);})}),/*#__PURE__*/_jsx(RecomendUsers,{})]})}),/*#__PURE__*/_jsx(ErrorModal,{})]}),/*#__PURE__*/_jsx(Footer,{}),/*#__PURE__*/_jsx(ScrollTop,{children:/*#__PURE__*/_jsx(Fab,{size:\"small\",\"aria-label\":\"scroll back to top\",children:/*#__PURE__*/_jsx(KeyboardArrowUp,{})})})]});});export default FeedPage;","map":{"version":3,"names":["React","useState","useEffect","observer","Container","PostCard","RecomendUsers","ErrorModal","useStores","feed","Footer","Aside","Fade","Toolbar","useScrollTrigger","Fab","Box","KeyboardArrowUp","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","ScrollTop","props","children","window","trigger","target","undefined","disableHysteresis","threshold","handleClick","event","anchor","ownerDocument","document","querySelector","scrollIntoView","block","in","onClick","role","sx","position","bottom","right","FeedPage","_useStores","RequestsStore","ConfigStore","_useState","_useState2","_slicedToArray","posts","setPosts","Promise","resolve","rejects","then","doGet","url","post","setErr","setIsShow","me","username","resp","setFollowings","following","id","style","top","zIndex","className","maxWidth","background","display","justifyContent","width","slice","reverse","map","item","_id","size"],"sources":["/Users/nazardosmukhambetov/Desktop/MAIN-PROJECT-GIGAGRAM-main/src/pages/private/feed/Feed.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { observer } from \"mobx-react-lite\";\nimport Container from \"@mui/material/Container\";\nimport PostCard from \"./PostCard\";\nimport RecomendUsers from \"./RecomendUsers\";\nimport ErrorModal from \"../../partial/modal/ErrorModal\";\nimport { useStores } from \"../../../stores/MainStore\";\n// eslint-disable-next-line no-unused-vars\nimport feed from \"./feed.scss\";\n\nimport Footer from \"../../partial/footer/Footer\";\nimport Aside from \"./Aside\";\nimport { Fade, Toolbar, useScrollTrigger, Fab, Box } from '@mui/material';\nimport { KeyboardArrowUp } from '@mui/icons-material';\n\nfunction ScrollTop(props) {\n  const { children, window } = props;\n  const trigger = useScrollTrigger({\n    target: window ? window() : undefined,\n    disableHysteresis: true,\n    threshold: 100,\n  });\n\n  const handleClick = (event) => {\n    const anchor = (event.target.ownerDocument || document).querySelector(\n      '#back-to-top-anchor',\n    );\n\n    if (anchor) {\n      anchor.scrollIntoView({\n        block: 'center',\n      });\n    }\n  };\n\n  return (\n    <Fade in={trigger}>\n      <Box\n        onClick={handleClick}\n        role=\"presentation\"\n        sx={{ position: 'fixed', bottom: 16, right: 16 }}\n      >\n        {children}\n      </Box>\n    </Fade>\n  );\n};\n\n\nconst FeedPage = observer(() => {\n\n  const { RequestsStore, ConfigStore } = useStores();\n\n  const [posts, setPosts] = useState([]);\n\n  useEffect(() => {\n    new Promise((resolve, rejects) => {\n      resolve();\n    })\n    .then(() => {\n      return RequestsStore.doGet(ConfigStore.url + \"/posts\");\n    })\n    .then((post) => {\n      //  ConfigStore.setLoading(false);\n      if(post === \"Forbidden\") {\n        ConfigStore.setErr(\"Token has been burned\");\n        ConfigStore.setIsShow(true);\n      } else {\n        setPosts(post);\n      }\n    })\n  }, []);\n\n  useEffect(() => {\n    if(ConfigStore.me.username) {\n      RequestsStore.doGet(ConfigStore.url + \"/followings/\" + ConfigStore.me.username)\n      .then((resp) => {\n        ConfigStore.setFollowings(resp.following);\n      })\n    } else{\n      return;\n    }\n  }, [ConfigStore.me.username]);\n\n  return (\n    <>\n      <Toolbar id=\"back-to-top-anchor\" style={{position: \"absolute\", top: 0, zIndex: \"-1\"}} />\n     \n      <div className=\"main__feed\">\n        <div className=\"feed__header\">\n          <h2>Feed page | Favoriets from students</h2>\n        </div>\n        <main className=\"feed\">\n          <Container\n            maxWidth=\"xl\"\n            style={{ background: \"none\", position: \"relative\" }}\n            sx={{ display: \"flex\", justifyContent: \"center\" }}\n          >\n            <Aside />\n            <div className=\"feed__posts\" style={{ background: \"none\", width: \"100%\" }}>\n              {posts === \"Not Found\" ? (\n                <h2 className=\"errorCase\">Sorry any posts found</h2>\n              ) : (\n                posts.slice().reverse().map((item) => (\n                  <PostCard item={item} key={item._id}/>\n                ))\n              )}\n            </div>\n            <RecomendUsers />\n          </Container>\n        </main>\n        <ErrorModal />\n      </div>\n     \n      <Footer />\n      <ScrollTop>\n        <Fab size=\"small\" aria-label=\"scroll back to top\">\n          <KeyboardArrowUp />\n        </Fab>\n      </ScrollTop>\n    </>\n  );\n});\n\nexport default FeedPage;"],"mappings":"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"},"metadata":{},"sourceType":"module"}