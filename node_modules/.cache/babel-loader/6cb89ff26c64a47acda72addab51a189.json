{"ast":null,"code":"import _objectSpread from\"/Users/nazardosmukhambetov/Desktop/MAIN-PROJECT-GIGAGRAM-main/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/nazardosmukhambetov/Desktop/MAIN-PROJECT-GIGAGRAM-main/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from\"react\";import{useForm}from\"react-hook-form\";import{Modal,Button}from\"react-bootstrap\";import TextField from\"@mui/material/TextField\";import modalStyle from\"./modal.scss\";import{observer}from\"mobx-react\";import{useStores}from\"../../../stores/MainStore\";import Success from\"../Success\";import ChildModal from\"./ChildModal\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var EditModal=observer(function(props){var _useStores=useStores(),RequestsStore=_useStores.RequestsStore,ConfigStore=_useStores.ConfigStore;var me=props.me;var _useState=useState(),_useState2=_slicedToArray(_useState,2),newUsername=_useState2[0],setNewUsername=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),newFullname=_useState4[0],setNewFullname=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),newAvatar=_useState6[0],setNewAvatar=_useState6[1];var _useState7=useState(),_useState8=_slicedToArray(_useState7,2),newAge=_useState8[0],setNewAge=_useState8[1];var _useState9=useState(),_useState10=_slicedToArray(_useState9,2),newBio=_useState10[0],setNewBio=_useState10[1];var _useForm=useForm({mode:\"onChange\"}),register=_useForm.register,handleSubmit=_useForm.handleSubmit,errors=_useForm.formState.errors;var onSubmit=function onSubmit(data){RequestsStore.doPut(ConfigStore.url+\"/me\",{username:data.username,avatar:data.avatar,age:data.age,bio:data.bio,fullName:data.fullname}).then(function(response){if(response._id){handleClose();ConfigStore.setUpdateMe(true);ConfigStore.setSnackSeverity(\"success\");ConfigStore.setSnackText(\"Updated successfully!\");ConfigStore.setIsShowSnack(true);}else{ConfigStore.setSnackSeverity(\"error\");response.status===400?ConfigStore.setSnackText(\"Username has been taken already\"):ConfigStore.setSnackText(response.statusText);ConfigStore.setIsShowSnack(true);}});};function handleClose(){ConfigStore.setIsShowEditModal(false);};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(Modal,{className:\"modals\",show:ConfigStore.isShowEditModal,onHide:handleClose,children:[/*#__PURE__*/_jsx(Modal.Header,{closeButton:true,children:/*#__PURE__*/_jsx(Modal.Title,{children:\"Edit Me\"})}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit(function(data){onSubmit(data);}),children:[/*#__PURE__*/_jsxs(Modal.Body,{children:[/*#__PURE__*/_jsx(TextField,_objectSpread(_objectSpread({type:\"text\",id:\"outlined-normal\",label:\"username\",fullWidth:true},register(\"username\")),{},{size:\"small\",defaultValue:me.username,onChange:function onChange(e){return setNewUsername(e.target.value);}})),/*#__PURE__*/_jsx(\"p\",{className:\"validError\",children:errors.username&&errors.username.message}),/*#__PURE__*/_jsx(TextField,_objectSpread(_objectSpread({type:\"text\",id:\"outlined-normal\",label:\"fullname\",fullWidth:true,size:\"small\"},register(\"fullname\")),{},{defaultValue:me.fullName,onChange:function onChange(e){return setNewFullname(e.target.value);}})),/*#__PURE__*/_jsx(\"p\",{className:\"validError\",children:errors.fullname&&errors.fullname.message}),/*#__PURE__*/_jsx(TextField,_objectSpread({type:\"url\",id:\"outlined-normal\",label:\"avatar\",fullWidth:true,size:\"small\"},register(\"avatar\",{pattern:{message:\"Invalid link\"},value:newAvatar,onChange:function onChange(e){setNewAvatar(e.target.value);}}))),/*#__PURE__*/_jsx(\"p\",{className:\"validError\",children:errors.avatar&&errors.avatar.message}),/*#__PURE__*/_jsx(TextField,_objectSpread(_objectSpread({type:\"number\",id:\"outlined-normal\",label:\"age\",fullWidth:true,size:\"small\"},register(\"age\")),{},{defaultValue:me.age,onChange:function onChange(e){return setNewAge(e.target.value);}})),/*#__PURE__*/_jsx(\"p\",{className:\"validError\",children:errors.age&&errors.age.message}),/*#__PURE__*/_jsx(TextField,_objectSpread(_objectSpread({type:\"text\",id:\"outlined-normal\",label:\"bio\",fullWidth:true,size:\"small\"},register(\"bio\")),{},{defaultValue:me.bio,onChange:function onChange(e){return setNewBio(e.target.value);}})),/*#__PURE__*/_jsx(\"p\",{className:\"validError\",children:errors.bio&&errors.age.bio})]}),/*#__PURE__*/_jsxs(Modal.Footer,{children:[/*#__PURE__*/_jsx(ChildModal,{}),/*#__PURE__*/_jsx(Button,{variant:\"secondary\",className:\"edit-btn\",type:\"submit\",children:\"Edit\"})]})]})]}),/*#__PURE__*/_jsx(Success,{})]});});export default EditModal;","map":{"version":3,"names":["React","useState","useEffect","useForm","Modal","Button","TextField","modalStyle","observer","useStores","Success","ChildModal","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","EditModal","props","_useStores","RequestsStore","ConfigStore","me","_useState","_useState2","_slicedToArray","newUsername","setNewUsername","_useState3","_useState4","newFullname","setNewFullname","_useState5","_useState6","newAvatar","setNewAvatar","_useState7","_useState8","newAge","setNewAge","_useState9","_useState10","newBio","setNewBio","_useForm","mode","register","handleSubmit","errors","formState","onSubmit","data","doPut","url","username","avatar","age","bio","fullName","fullname","then","response","_id","handleClose","setUpdateMe","setSnackSeverity","setSnackText","setIsShowSnack","status","statusText","setIsShowEditModal","children","className","show","isShowEditModal","onHide","Header","closeButton","Title","Body","_objectSpread","type","id","label","fullWidth","size","defaultValue","onChange","e","target","value","message","pattern","Footer","variant"],"sources":["/Users/nazardosmukhambetov/Desktop/MAIN-PROJECT-GIGAGRAM-main/src/pages/partial/modal/EditModal.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { useForm }                    from \"react-hook-form\";\nimport { Modal, Button }              from \"react-bootstrap\";\nimport TextField                      from \"@mui/material/TextField\";\nimport modalStyle                     from \"./modal.scss\";\nimport { observer }                   from \"mobx-react\";\nimport { useStores }                  from \"../../../stores/MainStore\";\nimport Success                        from \"../Success\";\nimport ChildModal                     from \"./ChildModal\";\nconst EditModal = observer((props) => {\n  const { RequestsStore, ConfigStore } = useStores();\n\n  const { me } = props;\n  \n  const [newUsername, setNewUsername] = useState();\n  const [newFullname, setNewFullname] = useState();\n  const [newAvatar, setNewAvatar] = useState();\n  const [newAge, setNewAge] = useState();\n  const [newBio, setNewBio] = useState();\n\n  const {\n    register,\n    handleSubmit,\n    formState: { errors },\n  } = useForm({ mode: \"onChange\" });\n\n  const onSubmit = (data) => {\n    RequestsStore.doPut(ConfigStore.url + \"/me\", {\n      username: data.username,\n      avatar: data.avatar,\n      age: data.age,\n      bio: data.bio,\n      fullName: data.fullname,\n    })\n    .then((response) => {\n      if(response._id) {\n        handleClose();\n        ConfigStore.setUpdateMe(true);\n        ConfigStore.setSnackSeverity(\"success\");\n        ConfigStore.setSnackText(\"Updated successfully!\");\n        ConfigStore.setIsShowSnack(true);\n      }\n      else{\n        ConfigStore.setSnackSeverity(\"error\");\n        response.status === 400 ? ConfigStore.setSnackText(\"Username has been taken already\") : ConfigStore.setSnackText(response.statusText);\n        ConfigStore.setIsShowSnack(true);\n      }\n    });\n  };\n\n  function handleClose() {\n    ConfigStore.setIsShowEditModal(false);\n  };\n\n  return (\n    <>\n      <Modal className=\"modals\" show={ConfigStore.isShowEditModal} onHide={handleClose}>\n        <Modal.Header closeButton>\n          <Modal.Title>Edit Me</Modal.Title>\n        </Modal.Header>\n        <form\n          onSubmit={handleSubmit((data) => {\n            onSubmit(data);\n          })}\n        >\n          <Modal.Body>\n            <TextField\n              type=\"text\"\n              id=\"outlined-normal\"\n              label=\"username\"\n              fullWidth\n              {...register(\"username\")}\n              size=\"small\"\n              defaultValue={me.username}\n              onChange={(e) => setNewUsername(e.target.value)}\n            />\n\n            <p className=\"validError\">\n              {errors.username && errors.username.message}\n            </p>\n            <TextField\n              type=\"text\"\n              id=\"outlined-normal\"\n              label=\"fullname\"\n              fullWidth\n              size=\"small\"\n              {...register(\"fullname\")}\n                defaultValue={me.fullName}\n                onChange={(e) => setNewFullname(e.target.value)}\n            />\n            <p className=\"validError\">\n              {errors.fullname && errors.fullname.message}\n            </p>\n              <TextField\n                type=\"url\"\n                id=\"outlined-normal\"\n                label=\"avatar\"\n                fullWidth\n                size=\"small\"\n                {...register(\"avatar\", {\n                  pattern: {\n                    message: \"Invalid link\",\n                  },\n                  value: newAvatar,\n                  onChange: (e) => {\n                    setNewAvatar(e.target.value);\n                  },\n                })}\n              />\n            <p className=\"validError\">{errors.avatar && errors.avatar.message}</p>\n            <TextField\n              type=\"number\"\n              id=\"outlined-normal\"\n              label=\"age\"\n              fullWidth\n              size=\"small\"\n              {...register(\"age\")}\n                defaultValue={me.age}\n                onChange={(e) => setNewAge(e.target.value)}\n            />\n            <p className=\"validError\">{errors.age && errors.age.message}</p>\n            <TextField\n              type=\"text\"\n              id=\"outlined-normal\"\n              label=\"bio\"\n              fullWidth\n              size=\"small\"\n              {...register(\"bio\")}\n                defaultValue={me.bio}\n                onChange={(e) => setNewBio(e.target.value)}\n            />\n            <p className=\"validError\">{errors.bio && errors.age.bio}</p>\n          </Modal.Body>\n          <Modal.Footer>\n          <ChildModal />\n            <Button variant=\"secondary\" className=\"edit-btn\" type=\"submit\">\n              Edit\n            </Button>\n          </Modal.Footer>\n        </form>\n      </Modal>\n      <Success />\n    </>\n  );\n});\nexport default EditModal;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}