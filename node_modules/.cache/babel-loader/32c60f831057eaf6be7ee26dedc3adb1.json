{"ast":null,"code":"import _objectSpread from\"/Users/nazardosmukhambetov/Desktop/MAIN-PROJECT-GIGAGRAM-main/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"/Users/nazardosmukhambetov/Desktop/MAIN-PROJECT-GIGAGRAM-main/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/nazardosmukhambetov/Desktop/MAIN-PROJECT-GIGAGRAM-main/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/nazardosmukhambetov/Desktop/MAIN-PROJECT-GIGAGRAM-main/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from\"react\";import{useForm}from\"react-hook-form\";import{useNavigate}from\"react-router-dom\";import{NavLink}from\"react-router-dom\";import ErrorModal from\"../../partial/modal/ErrorModal\";import{observer}from\"mobx-react\";import{useStores}from\"../../../stores/MainStore\";import BgSign from\"../../../backgrounds/BgSign\";import Button from\"@mui/material/Button\";import signInStyle from\"./signin.scss\";import Footer from\"../../partial/footer/Footer\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Signin=observer(function(){var _useStores=useStores(),RequestsStore=_useStores.RequestsStore,ConfigStore=_useStores.ConfigStore;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),username=_useState2[0],setUsername=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var _useForm=useForm({mode:\"onChange\"}),register=_useForm.register,handleSubmit=_useForm.handleSubmit,errors=_useForm.formState.errors;var navigate=useNavigate();var onSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(data){var resp;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return RequestsStore.doPost(ConfigStore.url+\"/signin\",{username:data.username,password:data.password});case 2:resp=_context.sent;if(resp.token){localStorage.setItem(\"token\",resp.token);navigate(\"/feed\");}else{ConfigStore.setErr(resp===\"Bad Request\"?\"Wrong username or password\":resp);ConfigStore.setIsShow(true);}case 4:case\"end\":return _context.stop();}},_callee);}));return function onSubmit(_x){return _ref.apply(this,arguments);};}();var _useState5=useState(\"password\"),_useState6=_slicedToArray(_useState5,2),passwordType=_useState6[0],setPasswordType=_useState6[1];var togglePassword=function togglePassword(){if(passwordType===\"password\"){setPasswordType(\"text\");return;}setPasswordType(\"password\");};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"signin\",children:[/*#__PURE__*/_jsx(BgSign,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"screen\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"screen__content\",children:[/*#__PURE__*/_jsx(\"h5\",{children:\"Sign In\"}),/*#__PURE__*/_jsxs(\"form\",{className:\"login\",onSubmit:handleSubmit(onSubmit),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"login__field\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-person-fill\"}),/*#__PURE__*/_jsx(\"input\",_objectSpread({className:\"login__input\",type:\"text\",name:\"username\",placeholder:\"Username\"},register(\"username\",{required:\"The field is required\",minLength:{value:4,message:\"Username is min 4 symbols\"},value:username,onChange:function onChange(e){setUsername(e.target.value);}}))),/*#__PURE__*/_jsx(\"p\",{className:\"validError\",children:errors.username&&errors.username.message})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"login__field\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-lock-fill\"}),/*#__PURE__*/_jsx(\"input\",_objectSpread({className:\"login__input\",type:passwordType,name:\"password\",placeholder:\"Password\"},register(\"password\",{required:\"Password is required\",minLength:{value:4,message:\"Password should be min 4 symbols\"},value:password,onChange:function onChange(e){setPassword(e.target.value);}}))),/*#__PURE__*/_jsx(\"span\",{className:\"btn btn-eye\",onClick:togglePassword,children:passwordType===\"password\"?/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-eye-slash\"}):/*#__PURE__*/_jsx(\"i\",{className:\"bi bi-eye\"})}),/*#__PURE__*/_jsx(\"p\",{className:\"validError\",children:errors.password&&errors.password.message})]}),/*#__PURE__*/_jsx(Button,{className:\"button login__submit\",type:\"submit\",children:/*#__PURE__*/_jsx(\"span\",{className:\"button__text\",children:\"Sign In\"})}),/*#__PURE__*/_jsx(Button,{size:\"small\",component:NavLink,to:\"/signup\",style:{marginTop:\"20%\",color:\"#000000\"},className:\"line-btn\",children:\"Or Sign Up\"}),/*#__PURE__*/_jsx(Button,{size:\"small\",component:NavLink,to:\"/forgot\",style:{marginTop:\"20%\",marginLeft:\"15%\",color:\"#000000\"},className:\"line-btn\",children:\"Forgot Password?\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"screen__background\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"screen__background__shape screen__background__shape4\"}),/*#__PURE__*/_jsx(\"span\",{className:\"screen__background__shape screen__background__shape3\"}),/*#__PURE__*/_jsx(\"span\",{className:\"screen__background__shape screen__background__shape2\"}),/*#__PURE__*/_jsx(\"span\",{className:\"screen__background__shape screen__background__shape1\"})]})]}),/*#__PURE__*/_jsx(ErrorModal,{})]}),/*#__PURE__*/_jsx(Footer,{})]});});export default Signin;","map":{"version":3,"names":["React","useState","useForm","useNavigate","NavLink","ErrorModal","observer","useStores","BgSign","Button","signInStyle","Footer","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Signin","_useStores","RequestsStore","ConfigStore","_useState","_useState2","_slicedToArray","username","setUsername","_useState3","_useState4","password","setPassword","_useForm","mode","register","handleSubmit","errors","formState","navigate","onSubmit","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","data","resp","wrap","_callee$","_context","prev","next","doPost","url","sent","token","localStorage","setItem","setErr","setIsShow","stop","_x","apply","arguments","_useState5","_useState6","passwordType","setPasswordType","togglePassword","children","className","_objectSpread","type","name","placeholder","required","minLength","value","message","onChange","e","target","onClick","size","component","to","style","marginTop","color","marginLeft"],"sources":["/Users/nazardosmukhambetov/Desktop/MAIN-PROJECT-GIGAGRAM-main/src/pages/public/signin/Signin.jsx"],"sourcesContent":["import React, { useState } from \"react\";\nimport { useForm }         from \"react-hook-form\";\nimport { useNavigate }     from \"react-router-dom\";\nimport { NavLink }         from \"react-router-dom\";\nimport ErrorModal          from \"../../partial/modal/ErrorModal\";\nimport { observer }        from \"mobx-react\";\nimport { useStores }       from \"../../../stores/MainStore\";\nimport BgSign              from \"../../../backgrounds/BgSign\";\nimport Button              from \"@mui/material/Button\";\nimport signInStyle         from \"./signin.scss\";\nimport Footer from \"../../partial/footer/Footer\";\n\nconst Signin = observer(() => {\n  const { RequestsStore, ConfigStore } = useStores();\n\n  const [username, setUsername] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n\n  const {\n    register,\n    handleSubmit,\n    formState: { errors },\n  } = useForm({ mode: \"onChange\" });\n\n  const navigate = useNavigate();\n\n  const onSubmit = async (data) => {\n    const resp = await RequestsStore.doPost(ConfigStore.url + \"/signin\", {\n      username: data.username,\n      password: data.password,\n    });\n    if (resp.token) {\n      localStorage.setItem(\"token\", resp.token);\n      navigate(\"/feed\");\n    } else {\n      ConfigStore.setErr(resp === \"Bad Request\" ? \"Wrong username or password\" : resp);\n      ConfigStore.setIsShow(true);\n    }\n  };\n\n  const [passwordType, setPasswordType] = useState(\"password\");\n  \n  const togglePassword = () => {\n    if (passwordType === \"password\") {\n      setPasswordType(\"text\");\n      return;\n    }\n    setPasswordType(\"password\");\n  };\n\n  return (\n    <>\n      <div className=\"signin\">\n        <BgSign />\n        <div className=\"screen\">\n          <div className=\"screen__content\">\n            <h5>Sign In</h5>\n            <form className=\"login\" onSubmit={handleSubmit(onSubmit)}>\n              <div className=\"login__field\">\n                <i className=\"bi bi-person-fill\"></i>\n                <input\n                  className=\"login__input\"\n                  type=\"text\"\n                  name=\"username\"\n                  placeholder=\"Username\"\n                  {...register(\"username\", {\n                    required: \"The field is required\",\n                    minLength: {\n                      value: 4,\n                      message: \"Username is min 4 symbols\",\n                    },\n                    value: username,\n                    onChange: (e) => {\n                      setUsername(e.target.value);\n                    },\n                  })}\n                />\n                <p className=\"validError\">\n                  {errors.username && errors.username.message}\n                </p>\n              </div>\n              <div className=\"login__field\">\n                <i className=\"bi bi-lock-fill\"></i>\n                <input\n                  className=\"login__input\"\n                  type={passwordType}\n                  name=\"password\"\n                  placeholder=\"Password\"\n                  {...register(\"password\", {\n                    required: \"Password is required\",\n                    minLength: {\n                      value: 4,\n                      message: \"Password should be min 4 symbols\",\n                    },\n                    value: password,\n                    onChange: (e) => {\n                      setPassword(e.target.value);\n                    },\n                  })}\n                />\n                <span className=\"btn btn-eye\" onClick={togglePassword}>\n                  {passwordType === \"password\" ? (\n                    <i className=\"bi bi-eye-slash\"></i>\n                  ) : (\n                    <i className=\"bi bi-eye\"></i>\n                  )}\n                </span>\n                <p className=\"validError\">\n                  {errors.password && errors.password.message}\n                </p>\n              </div>\n              <Button className=\"button login__submit\" type=\"submit\">\n                <span className=\"button__text\">Sign In</span>\n              </Button>\n              <Button\n                size=\"small\"\n                component={NavLink}\n                to=\"/signup\"\n                style={{ marginTop: \"20%\", color: \"#000000\" }}\n                className=\"line-btn\"\n              >\n                Or Sign Up\n              </Button>\n              <Button\n                size=\"small\"\n                component={NavLink}\n                to=\"/forgot\"\n                style={{ marginTop: \"20%\", marginLeft: \"15%\", color: \"#000000\" }}\n                className=\"line-btn\"\n              >\n                Forgot Password?\n              </Button>\n            </form>\n          </div>\n          <div className=\"screen__background\">\n            <span className=\"screen__background__shape screen__background__shape4\"></span>\n            <span className=\"screen__background__shape screen__background__shape3\"></span>\n            <span className=\"screen__background__shape screen__background__shape2\"></span>\n            <span className=\"screen__background__shape screen__background__shape1\"></span>\n          </div>\n        </div>\n        <ErrorModal />\n      </div>\n       <Footer />\n     </>\n  );\n});\nexport default Signin;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}